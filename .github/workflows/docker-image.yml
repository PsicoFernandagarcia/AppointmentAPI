name: Docker Image CI

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:

  build:

    runs-on: ubuntu-latest

    steps:
      -
        name: Deploy to DO
        uses: appleboy/ssh-action@v0.1.2
        with:
          host: ${{ secrets.SSH_HOST }}
          username: ${{ secrets.USERNAME }}
          key: "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"
          script: |
            echo "login to server success"
            docker pull joacoferroni/appointment-api:latest
            docker run -d --network="host" --restart=unless-stopped --name="psicofer_api_c" joacoferroni/appointment-api:latest 
